<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>How to Benchmarking Existing Examples</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>

<!-- MathJax scripts -->
<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<pre><code class="r">library(AccelBenchmark)
</code></pre>

<h2>How to Benchmarking Existing Examples</h2>

<p><code>benchmark</code> is the main function in these codes. We use some examples to show how to use it. First let&#39;s try poisson mixture.</p>

<pre><code class="r"># special control parameters for quasi-newton
qn_control = list(qn=2)

# set seed for reproducibility 
# randomness comes from parameter initialization 
# or data generation process
set.seed(54321)
res_poi = benchmark(
  task = &quot;poissmix&quot;,
  algorithm = c(&quot;raw&quot;, &quot;squarem&quot;, &quot;qn&quot;, &quot;pem&quot;, &quot;daarem&quot;, &quot;nes&quot;),
  ntimes = 20,
  control = list(maxiter=2000, tol=1e-7),
  control.spec = list(qn_v2=qn_control),
  verbose = FALSE
)

plot(res_poi, type=&quot;iter&quot;, start_from=5)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk poisson"/></p>

<pre><code class="r">
summary(res_poi, rate_tol=0.1)
#&gt; # A tibble: 6 × 15
#&gt;   method  conv_rate mean_user_time mean_elapsed_time mean_fpevals median_fpevals
#&gt;   &lt;chr&gt;       &lt;dbl&gt;          &lt;dbl&gt;             &lt;dbl&gt;        &lt;dbl&gt;          &lt;dbl&gt;
#&gt; 1 nes          1           0.00100           0.00100        163.             176
#&gt; 2 daarem       1           0.002             0.00100         47.6             48
#&gt; 3 squarem      1           0.001             0.001           74.1             78
#&gt; 4 qn           1           0.00100           0.00150         62.7             42
#&gt; 5 pem          1           0.00350           0.00400        191.             192
#&gt; 6 raw          0.25        0.0175            0.0200        1973.            2000
#&gt; # … with 9 more variables: std_fpevals &lt;dbl&gt;, std_user_time &lt;dbl&gt;,
#&gt; #   std_elapsed_time &lt;dbl&gt;, user_time_low &lt;dbl&gt;, user_time_up &lt;dbl&gt;,
#&gt; #   elapsed_time_low &lt;dbl&gt;, elapsed_time_up &lt;dbl&gt;, fpevals_low &lt;dbl&gt;,
#&gt; #   fpevals_up &lt;dbl&gt;
</code></pre>

<p>Here, <code>benchmark</code> takes these basic parameters. </p>

<ul>
<li><p><code>task</code> is for a problem and it is a list containing <code>initfn</code> for parameter initiation function, <code>fixptfn</code> for fix-point iteration function, <code>objfn</code> for loss function and other parameters that are needed for <code>fixptfn</code> and <code>objfn</code>. <code>task</code> can also be a function that returns such list. And there are 6 recorded list which you can also pass in their character names. &ldquo;poissmix&rdquo; for Poisson mixture, &ldquo;mvt_mmf&rdquo; for multivariate t-distribution using MMF algorithm, &ldquo;lasso&rdquo; for LASSO, &ldquo;bvs&rdquo; for Bayesian variable selection, &ldquo;sinkhorn&rdquo; for Sinkhorn iteration and &ldquo;tsne&rdquo; for t-SNE.</p></li>
<li><p><code>algorithm</code> is an array for algorithms being benchmarked. They are &ldquo;raw&rdquo; for original algorithm, &ldquo;squarem&rdquo; for SQUAREM, &ldquo;daarem&rdquo; for DAAREM, &ldquo;qn&rdquo; for Quasi-Newton, &ldquo;pem&rdquo; for parabolic-EM and &ldquo;nes&rdquo; for restart-Nesterov.</p></li>
<li><p><code>ntimes</code> is the number of runs used in benchmarking.</p></li>
<li><p><code>control</code> is a control list used for all algorithm. For the information of how to specify the control list, please check their individual packages <code>turboEM</code>, <code>SQUAREM</code>, <code>daarem</code>.</p></li>
<li><p><code>control.spec</code> is a named list to pass in specific control list for any used algorithm.</p></li>
</ul>

<p><code>benchmark</code> function will return a <code>benchmark</code> class that <code>plot</code> method and <code>summary</code> method are implemented for it. <code>plot</code> will plot out loss v.s fpevals / elapsed time for one run, where loss is difference of loss with the smallest loss. <code>type</code> parameter controls x-axis to be fpevals or elapsed time and <code>start_from</code> parameter controls which run to be plotted. <code>summary</code> will calculate all benchmark measures. It has two potential parameters: <code>rate_tol</code> means a run with a loss smaller than <code>(1+rate_tol) * minimum_loss</code> will be regarded as convergence. <code>loss_tol</code> means a run with a loss smaller than <code>loss_tol</code> will be regarded as convergence.</p>

<p><code>task</code> can also be a function that return this kind of list. And the parameters for that function can be passed into <code>benchmark</code> function. For example the LASSO problem requires a regularization parameter \(\lambda\), which is the weight for the \(L_1\) penalty. We can benchmark it as following with <code>lam</code> being \(lambda\) (not run)</p>

<pre><code class="r">sqem_ctrl = list(step.min0=0)

set.seed(54321)
res_l1 = benchmark(
  &quot;lasso&quot;,
  algorithm=c(&quot;raw&quot;, &quot;squarem&quot;, &quot;qn_v3&quot;, &quot;pem&quot;, &quot;daarem&quot;, &quot;nes&quot;),
  ntimes = 200,
  control = list(maxiter=20000),
  control.spec = list(squarem=sqem_ctrl),
  lam = 1
)
</code></pre>

<h2>How to Benchmark Your Own Task</h2>

<p>Now let&#39;s give an example how to benchmark your own task. We consider a toy example where the fixed point iteration is \(f(x) = b / (a + x)\), where \(a, b > 0\). Therefore the fixed point is \((\sqrt{a^2 + 4b} - a) / 2\) (start from \(x > 0\)). Therefore we can specify loss as MSE. Here is the code for benchmarking the task (initialize \(x\) uniformly in \([0, 1]\)).</p>

<pre><code class="r"># Initialization function 
# make sure this function takes no parameters
toy_init = function(){
  runif(1, 0, 1)
}

# Fixed point iteration
toy_fixptfn = function(par, a, b){
  b / (a + par)
}

# Loss function
toy_objfn = function(par, a, b){
  sqrt((par - (sqrt(a^2 + 4*b) - a) / 2)^2)
}

# task function
# returned list can contain any extra parameters
# they will be passed in fixptfn and objfn
# make sure their parameter names match
toy_task = function(a=1, b=1){
  list(
    initfn = toy_init,
    fixptfn = toy_fixptfn,
    objfn = toy_objfn,
    a = a, b = b
  )
}

# benchmarking
set.seed(54321)
res_toy = benchmark(
  toy_task,
  algorithm=c(&quot;raw&quot;, &quot;squarem&quot;, &quot;qn&quot;, &quot;pem&quot;, &quot;daarem&quot;, &quot;nes&quot;),
  ntimes = 10,
  control = list(maxiter=1000),
  verbose = FALSE,
  a = 11, b = 100
)

summary(res_toy, loss_tol=1e-7)
#&gt; # A tibble: 6 × 15
#&gt;   method  conv_rate mean_user_time mean_elapsed_time mean_fpevals median_fpevals
#&gt;   &lt;chr&gt;       &lt;dbl&gt;          &lt;dbl&gt;             &lt;dbl&gt;        &lt;dbl&gt;          &lt;dbl&gt;
#&gt; 1 pem             1        0                 0               20.8             21
#&gt; 2 raw             1        0                 0               18               18
#&gt; 3 squarem         1        0                 0               19               19
#&gt; 4 nes             1        0.00100           0.00100        149              149
#&gt; 5 daarem          1        0.00300           0.00300         17               17
#&gt; 6 qn              1        0.00400           0.00500         20               20
#&gt; # … with 9 more variables: std_fpevals &lt;dbl&gt;, std_user_time &lt;dbl&gt;,
#&gt; #   std_elapsed_time &lt;dbl&gt;, user_time_low &lt;dbl&gt;, user_time_up &lt;dbl&gt;,
#&gt; #   elapsed_time_low &lt;dbl&gt;, elapsed_time_up &lt;dbl&gt;, fpevals_low &lt;dbl&gt;,
#&gt; #   fpevals_up &lt;dbl&gt;
</code></pre>

</body>

</html>
